<div class="player"
     fileDrop
     (fileChange)="filesInput.next($event)">


  <player scroll></player>


  <div>
    <files-input></files-input>

    <button (click)="pen.next()"
            [disabled]="(pen.isSelected$ | push)">
      <icon-pen></icon-pen>
    </button>

    <button (click)="eraser.next()"
            [disabled]="(eraser.isSelected$ | push)">
      <icon-eraser></icon-eraser>
    </button>
    <color-selector></color-selector>

    <brush-size-selector></brush-size-selector>
  </div>

  <div class="action">
    <button (click)="previousComment.next()">
      <icon-skip-previous></icon-skip-previous>
    </button>
    <button (click)="previousFrame.next()"
            (pointerdown)="rewind.next($event)"
            (pointerup)="rewind.next($event)"
            (pointerleave)="rewind.next($event)">
      <icon-fast-rewind></icon-fast-rewind>
    </button>
    <button (click)="play.next()">
      <icon-play></icon-play>
    </button>
    <button (click)="pause.next()"
            [disabled]="!(isPlaying$ | push)">
      <icon-pause></icon-pause>
    </button>
    <button (click)="nextFrame.next()"
            (pointerdown)="forward.next($event)"
            (pointerup)="forward.next($event)"
            (pointerleave)="forward.next($event)">
      <icon-fast-forward></icon-fast-forward>
    </button>
    <button (click)="nextComment.next()">
      <icon-skip-next></icon-skip-next>
    </button>
  </div>

  <!-- <div>
    <button (click)="comments.clear$.next()">clear</button>
  </div> -->

  <frame-rate-selector></frame-rate-selector>

  <span>Time:

    <ng-container>{{ currentTime$ | push | timecode : (fps$ | push) }}</ng-container>
  </span>
  <span>Frame:

    <ng-container>{{ currentFrame$ | push }}</ng-container> /

    <ng-container>{{ totalFrames$ | push }}</ng-container>
  </span>

  <div>
    <timeline></timeline>
  </div>

  <div>
    <button (click)="annotations.save$.next()"
            [file]="(annotations.file$ | push)">
      <icon-save></icon-save>
    </button>

    <button (click)="undo.next()">
      <icon-undo></icon-undo>
    </button>
    <button (click)="redo.next()">
      <icon-redo></icon-redo>
    </button>

  </div>
</div>

<!-- <div class="comments">
  <div class="comments_wrapper">

    <div class="add_comment">
      <button (click)="store.addComment()">
        <icon-add></icon-add>
      </button>
    </div>

    <button *ngFor="let comment of (store.entities$ | push); let i = index"
            class="comment"
            (click)="store.selectLayer(i)"
            [ngClass]="{'active': (store.currentEntityIndex$ | push) === i }">

      <textarea class="comment_content"
                [value]="comment.text"
                textareaAutosize></textarea>
    </button>

  </div>
</div> -->

